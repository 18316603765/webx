# 配置网络 {#concept_268938 .concept}

专有网络VPC是独有的云上私有网络，使用VPC可以将流量安全地路由到在Web+中运行应用的ECS实例。如果您在启动环境时未配置VPC，Web+将使用[默认VPC](../../SP_22/DNVPC11839992/ZH-CN_TP_2438_V7.dita)。您可以在自定义 VPC 中启动您的环境以自定义网络和安全设置。您可以在 Elastic Beanstalk 中选择用于您的资源的子网，以及如何为您的环境中的实例和负载均衡器配置 IP 地址。在创建环境时，它将锁定到一个 VPC，但您可以在运行的环境上更改子网和 IP 地址设置。

## 步骤一：创建专有网络和交换机 {#section_2hh_0tp_zh3 .section}

在专有网络中使用云产品，您必须要先做好网络规划，创建好VPC和云产品所属的子网（交换机）。关于如何规划网段，请参见[网络规划](../../cn.zh-CN/最佳实践/网络规划.md#)。

完成以下操作步骤，创建一个专有网络和交换机：

1.  登录[专有网络管理控制台](https://vpcnext.console.aliyun.com)。
2.  在顶部菜单栏，选择专有网络的地域。

    专有网络的地域和要部署的云资源的地域必须相同，本操作选择**华北1**。

3.  根据以下信息配置专有网络和交换机。

    **说明：** 本操作中，选择**不分配IPv6地址**。

    |配置|说明|
    |:-|:-|
    |**专有网络配置**|
    |**名称**|专有网络的名称。 长度为2-128个字符，以英文字母或中文开头，可包含数字，下划线（\_）和短横线（-）。

 |
    |**IPv4网段**|建议您使用RFC私网地址作为专有网络的网段。     -   您可以使用192.168.0.0/16、172.16.0.0/12和10.0.0.0/8这三个标准网段或其子集。如果要使用标准网段的子网作为VPC的网段，需要使用CreateVpc创建VPC。详细信息，请参见[CreateVpc](../../cn.zh-CN/API参考/专有网络（VPC）/CreateVpc.md#)。

    -   如果有多个VPC，或者VPC和本地数据中心互连构建混合云的需求，建议使用上面这些标准网段的子网作为VPC的网段，掩码不超过/16。

    -   如果云上只有一个VPC并且不需要和本地数据中心互通，那么选择以上任何一个网段或其子网。

 **说明：** VPC创建后，不能再修改IPv4网段。

 |
    |**IPv6网段**| 选择是否给VPC分配IPv6网段，默认不分配IPv6网段。

 如果您选择分配IPv6网段，系统将为您的VPC自动分配掩码为/56的IPv6网段，如2xx1:db8::/56。

 **说明：** VPC创建后，不能再修改IPv6网段。

 |
    |**描述**|输入VPC的描述信息。 描述可包含2-256个中英文字符，不能以http://和https://开头。

 |
    |**资源组**|选择VPC所属的资源组。|
    |**交换机配置**|
    |**名称**|交换机的名称。 长度为2-128个字符，以英文字母或中文开头，可包含数字，下划线（\_）和短横线（-）。

 |
    |**可用区**|交换机的可用区。同一VPC内不同可用区的交换机内网互通。|
    |**IPv4网段**|交换机的IPv4网段。交换机的网段限制如下：     -   交换机的网段可以和其所属的VPC网段相同或者是其VPC网段的子集。

例如，VPC的网段是192.168.0.0/16，那么该VPC内的交换机的网段可以是192.168.0.0/16，也可以是192.168.0.0/17，一直到192.168.0.0/29。

**说明：** 如果交换机的网段和专有网络的网段相同，您只能创建一个交换机。

    -   交换机的网段的大小在16位网络掩码与29位网络掩码之间，可提供8-65536个地址。

    -   每个交换机的第一个和最后三个IP地址为系统保留地址。

以192.168.1.0/24为例，192.168.1.0、 192.168.1.253、 192.168.1.254和192.168.1.255这些地址是系统保留地址。

    -   如果该交换机有和其他专有网络的交换机，或本地数据中心通信的需求，确保交换机的网段和要通信的网段不冲突。

 **说明：** 交换机创建后，不能再修改网段。

 |
    |**IPv6网段**| 交换机的IPv6网段。

 交换机的IPv6网段的掩码默认为/64，您可以输入十进制数字0-255，来自定义交换机IPv6网段的最后8比特位。

 如VPC的IPv6网段为2xx1:db8::/64，在交换机的IPv6网段输入十进制数字255（对应十六进制为ff），则交换机的IPv6网段将为2xx1:db8:ff::/64。

 |
    |**描述**|输入交换机的描述信息。 描述可包含2-256个中英文字符，不能以http://和https://开头。

 |


## 步骤二：在Web+控制台中配置VPC {#section_vvy_iqh_5uu .section}

1.  登录[Web+控制台](https://webplus.console.aliyun.com)。
2.  在**概览**页**最近更新的部署环境**区域的右上角单击**查看全部**。
3.  在**应用及部署环境**页面单击所选应用最左侧的 ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/163212/156324889947117_zh-CN.png)展开应用所关联的环境列表。

    **说明：** 在**概览**页会罗列4个最近更新的部署环境，如需管理的环境在该列表中，可以直接单击环境名称进入环境管理控制台。

4.  选择并单击部署环境名称进入部署环境**概览**页面。
5.  在左侧导航栏单击**配置**进入部署环境配置页面。
6.  在**资源**区域单击展开**网络**，然后单击 ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/222006/156324890047671_zh-CN.png) 同步VPC至Web+。
7.  在**VPC**的下拉框中选择一个专有网络，并在**VSwitch**的下拉框中选择一个或多个交换机。

    **说明：** Web+应用必须部署在交换机内，您可以将应用部署在不同可用区的交换机内，提高应用的可用性。

8.  完成设置后可单击配置页面右上角的**变更配置**使更改生效。

