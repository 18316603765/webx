---
keyword: [HTTPS, 安全性, SSL]
---

# 为部署环境配置HTTPS

Web+可以为部署环境开启HTTPS功能，从而显著提高站点的安全性。您的应用无需支持HTTPS协议，在Web+的部署环境中开启HTTPS后，Web+将会卸载外部请求的SSL，与后端应用通过HTTP协议进行交互。Web+支持两种开启HTTPS的方式：在反向代理配置HTTPS和在SLB配置HTTPS。

## 获取证书（可选）

您可以使用Web+提供的自签证书，该证书为非可信CA机构颁发，在用户访问时会被浏览器判定为非法站点，因此建议将该证书用于测试目的。

您也可以获取由可信CA机构颁发的证书然后上传至Web+中：

-   **阿里云SSL证书**：您可以在[阿里云证书](https://www.aliyun.com/product/cas)购买或者获取免费证书。
-   **其他第三方证书颁发机构**：若您要从第三方证书颁发机构获取证书，阅读该证书颁发机构提供的文档进行获取。

## 在反向代理中配置HTTPS

若您的环境启用了反向代理，可以在反向代理中配置HTTPS协议。当您选择了HTTPS协议后，反向代理将监听实例的443端口；否则反向代理将工作在80端口。

**说明：** 当您配置了协议类型为HTTP或HTTPS的公网或内网SLB时，在反向代理中将不能配置HTTPS协议。

1.  登录[Web+控制台](https://webplus.console.aliyun.com)。
2.  在**概览**页**最近更新的部署环境**区域的右上角单击**查看全部**。
3.  在**应用及部署环境**页面单击所选应用最左侧的**+**图标以展开应用所关联的环境列表。
4.  单击部署环境ID进入部署环境**概览**页面。
5.  在左侧导航栏选择**配置**。
6.  在**主机实例**区域单击**反向代理**，打开**启用反向代理**开关，选择反向代理类型为**Nginx（1.14.2）**，并选择**协议**为**HTTPS**。

    ![启用反向代理](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/6552760061/p63157.png)

7.  配置证书：
    -   **使用指定的证书**：如果您希望在生产环境使用合法的证书，则需要从证书提供商处取得合法证书文件，将其上传到Web+。您需要在Web+上传两个文件，分别为**公钥证书文件**与**私钥文件**。

        ![启用配置证书](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/3435063951/p63161.png)

        **说明：** 私钥文件非常重要，请妥善保管，谨防泄露。

    -   **由Web+自动生成证书**：由Web+自动生成SSL证书，由于此证书为自签证书，无法通过浏览器校验，因此仅适用于测试的场合。
8.  完成设置后可单击配置页面右上角的**变更配置**使更改生效。

## 在SLB中配置HTTPS

如果您在Web+的环境开启了SLB功能，同时需要使用HTTPS功能，推荐您在SLB上开启HTTPS功能。

1.  在部署环境配置页面的**网络**区域单击**公网负载均衡SLB**。
2.  打开**启用公网SLB**开关。
3.  **实例来源**选择为**代购**。
4.  选择**实例规格**类型。
5.  设置**监听协议**为**HTTPS**。
6.  设置**监听端口**为443。

    SLB实例的监听端口，用户可以使用此端口从公网访问应用服务。在代购模式下，Web+将帮助您创建和维护该端口。

7.  选择**服务器证书**。

    若您在SLB上启用HTTPS功能，则需要先将证书文件添加到SLB系统，您可以点击页面上的链接快速进入证书管理页面。

8.  设置**转发策略**。

    转发规则的格式为Host+Path，Host或Path需至少配置一项。下面的转发规则均为有效设置：

    -   www.taobao.com/test
    -   www.taobao.com
    -   /test
9.  单击配置页面右上角的**变更配置**使更改生效。

**说明：**

-   若您启用了反向代理，且协议类型为HTTPS时，将无法在SLB配置中使用HTTPS协议。
-   在公网负载均衡SLB上使用HTTPS与内网负载均衡上使用SLB方法相同且互不影响。

